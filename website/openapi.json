{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/papers/upload_url":{"get":{"summary":"Get Upload Url","description":"Obtain a pre-signed URL for uploading a paper file to service's bucket. You must upload the file before creating a analysis task.\n\n:return: Pre-signed URL for file upload.\n:rtype: FileUploadResponse","operationId":"get_upload_url_papers_upload_url_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileUploadResponse"}}}}}}},"/papers/":{"get":{"summary":"Get Papers","description":"Retrieve all papers from the database.\n\n:return: List of all papers.\n:rtype: List[Paper]","operationId":"get_papers_papers__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Paper"},"type":"array","title":"Response Get Papers Papers  Get"}}}}}}},"/papers/{paper_id}":{"get":{"summary":"Get Paper","description":"Retrieve a specific paper by its ID.\n\n:param paper_id: The unique identifier of the paper.\n:return: The paper with the specified ID.\n:rtype: Paper\n:raises HTTPException: If the paper is not found.","operationId":"get_paper_papers__paper_id__get","parameters":[{"name":"paper_id","in":"path","required":true,"schema":{"type":"string","title":"Paper Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Paper"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/papers/{paper_id}/blocks":{"get":{"summary":"Get Paper Blocks","description":"Retrieve all blocks of a specific paper by its ID.\n\n:param paper_id: The unique identifier of the paper.\n:return: A list of blocks associated with the paper.\n:rtype: PaperBlocksResponse\n:raises HTTPException: If the paper is not found.","operationId":"get_paper_blocks_papers__paper_id__blocks_get","parameters":[{"name":"paper_id","in":"path","required":true,"schema":{"type":"string","title":"Paper Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaperBlocksResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/analyses/":{"post":{"summary":"Create Analysis","description":"Endpoint to create a new analysis task.\n\n:param request: Request containing file key for the uploaded paper.\n:return: Response containing analysis ID and status.\n:rtype: CreateAnalysisResponse","operationId":"create_analysis_analyses__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/analyses/{analysis_id}":{"get":{"summary":"Get Analysis","description":"Retrieve an analysis task by its ID.\n\n:param analysis_id: Unique identifier of the analysis task.\n:return: Analysis details including status and file information.\n:rtype: GetAnalysisResponse","operationId":"get_analysis_analyses__analysis_id__get","parameters":[{"name":"analysis_id","in":"path","required":true,"schema":{"type":"string","title":"Analysis Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AnalysisStatus":{"type":"string","enum":["created","extracting_markdown","markdown_extracted","generating_metadata","metadata_generated","processing_into_blocks","completed","errored"],"title":"AnalysisStatus"},"BlockKind":{"type":"string","enum":["header","paragraph","figure","table","equation","code_block","quote","callout","reference","footnote","quiz"],"title":"BlockKind"},"Callout":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"kind":{"$ref":"#/components/schemas/BlockKind"},"paper":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"}],"title":"Paper"},"next_block":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Next Block"},"text":{"type":"string","title":"Text"}},"type":"object","required":["kind","paper","text"],"title":"Callout"},"CodeBlock":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"kind":{"$ref":"#/components/schemas/BlockKind"},"paper":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"}],"title":"Paper"},"next_block":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Next Block"},"code":{"type":"string","title":"Code"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"}},"type":"object","required":["kind","paper","code"],"title":"CodeBlock"},"CreateAnalysisRequest":{"properties":{"file_key":{"type":"string","title":"File Key"}},"type":"object","required":["file_key"],"title":"CreateAnalysisRequest","description":"Request model for creating an analysis task."},"CreateAnalysisResponse":{"properties":{"analysis_id":{"type":"string","title":"Analysis Id"},"status":{"$ref":"#/components/schemas/AnalysisStatus","default":"created"},"message":{"type":"string","title":"Message","default":"Analysis task created successfully."}},"type":"object","required":["analysis_id"],"title":"CreateAnalysisResponse","description":"Response model for analysis creation endpoint."},"Equation":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"kind":{"$ref":"#/components/schemas/BlockKind"},"paper":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"}],"title":"Paper"},"next_block":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Next Block"},"caption":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Caption"},"equation":{"type":"string","title":"Equation"}},"type":"object","required":["kind","paper","equation"],"title":"Equation"},"Figure":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"kind":{"$ref":"#/components/schemas/BlockKind"},"paper":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"}],"title":"Paper"},"next_block":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Next Block"},"caption":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Caption"},"figure_number":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Figure Number"},"image_url":{"type":"string","title":"Image Url"}},"type":"object","required":["kind","paper","image_url"],"title":"Figure"},"FileUploadResponse":{"properties":{"upload_url":{"type":"string","title":"Upload Url"},"key":{"type":"string","title":"Key"}},"type":"object","required":["upload_url","key"],"title":"FileUploadResponse","description":"Response model for file upload endpoint.\n.\n:param upload_url: Pre-signed URL for file upload.\n:param key: S3 object key for the uploaded file."},"Footnote":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"kind":{"$ref":"#/components/schemas/BlockKind"},"paper":{"anyOf":[{"$ref":"#/components/schemas/Paper"},{"type":"null"}]},"next_block":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Next Block"},"text":{"type":"string","title":"Text"},"reference_number":{"type":"integer","title":"Reference Number"}},"type":"object","required":["kind","text","reference_number"],"title":"Footnote"},"GetAnalysisResponse":{"properties":{"analysis_id":{"type":"string","title":"Analysis Id"},"status":{"$ref":"#/components/schemas/AnalysisStatus"},"file_key":{"type":"string","title":"File Key"},"paper_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Paper Id"}},"type":"object","required":["analysis_id","status","file_key"],"title":"GetAnalysisResponse","description":"Response model for retrieving an analysis task."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Header":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"kind":{"$ref":"#/components/schemas/BlockKind"},"paper":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"}],"title":"Paper"},"next_block":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Next Block"},"level":{"type":"integer","title":"Level"},"text":{"type":"string","title":"Text"}},"type":"object","required":["kind","paper","level","text"],"title":"Header"},"Paper":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"title":{"type":"string","title":"Title"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["title"],"title":"Paper"},"PaperBlocksResponse":{"properties":{"blocks":{"items":{"anyOf":[{"$ref":"#/components/schemas/Paragraph"},{"$ref":"#/components/schemas/Header"},{"$ref":"#/components/schemas/Figure"},{"$ref":"#/components/schemas/Table"},{"$ref":"#/components/schemas/Equation"},{"$ref":"#/components/schemas/CodeBlock"},{"$ref":"#/components/schemas/Quote"},{"$ref":"#/components/schemas/Callout"},{"$ref":"#/components/schemas/Reference"},{"$ref":"#/components/schemas/Footnote"},{"$ref":"#/components/schemas/Quiz"}]},"type":"array","title":"Blocks"}},"type":"object","required":["blocks"],"title":"PaperBlocksResponse","description":"Response model for retrieving blocks of a paper."},"Paragraph":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"kind":{"$ref":"#/components/schemas/BlockKind"},"paper":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"}],"title":"Paper"},"next_block":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Next Block"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"text":{"type":"string","title":"Text"}},"type":"object","required":["kind","paper","text"],"title":"Paragraph"},"PydanticObjectId":{"type":"string","maxLength":24,"minLength":24,"pattern":"^[0-9a-f]{24}$","example":"5eb7cf5a86d9755df3a6c593"},"Quiz":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"kind":{"$ref":"#/components/schemas/BlockKind"},"paper":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"}],"title":"Paper"},"next_block":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Next Block"},"question":{"type":"string","title":"Question"},"options":{"items":{"type":"string"},"type":"array","title":"Options"},"correct_answer":{"type":"string","title":"Correct Answer"},"explanation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Explanation"}},"type":"object","required":["kind","paper","question","options","correct_answer"],"title":"Quiz"},"Quote":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"kind":{"$ref":"#/components/schemas/BlockKind"},"paper":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"}],"title":"Paper"},"next_block":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Next Block"},"text":{"type":"string","title":"Text"},"author":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Author"}},"type":"object","required":["kind","paper","text"],"title":"Quote"},"Reference":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"kind":{"$ref":"#/components/schemas/BlockKind"},"paper":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"}],"title":"Paper"},"next_block":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Next Block"},"title":{"type":"string","title":"Title"},"authors":{"items":{"type":"string"},"type":"array","title":"Authors"},"publication_year":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Publication Year"},"journal":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Journal"},"volume":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Volume"},"issue":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Issue"},"pages":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pages"},"doi":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Doi"}},"type":"object","required":["kind","paper","title","authors"],"title":"Reference"},"Table":{"properties":{"_id":{"anyOf":[{"$ref":"#/components/schemas/PydanticObjectId"},{"type":"null"}],"description":"MongoDB document ObjectID"},"kind":{"$ref":"#/components/schemas/BlockKind"},"paper":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"}],"title":"Paper"},"next_block":{"anyOf":[{"properties":{"id":{"type":"string","title":"Id"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["id","collection"]},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Next Block"},"caption":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Caption"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"columns":{"items":{"type":"string"},"type":"array","title":"Columns"},"rows":{"items":{"items":{"type":"string"},"type":"array"},"type":"array","title":"Rows"}},"type":"object","required":["kind","paper","columns","rows"],"title":"Table"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}